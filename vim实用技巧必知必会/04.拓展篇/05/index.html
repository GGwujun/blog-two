<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog-two/umi.css" />
    <script>
      window.routerBase = "/blog-two";
    </script>
    <script>
      //! umi version: 3.5.17
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.indexOf(e) > -1 ? e : r[0]
        );
      })();
    </script>
    <title>拓展5 | 其他插件和技巧：吴咏炜的箱底私藏</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/vim实用技巧必知必会/04.拓展篇/05" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-two/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>后端开发<ul><li><a href="/blog-two/go语言核心36讲">go语言核心36讲</a></li><li><a href="/blog-two/go并发编程实战">go并发编程实战</a></li><li><a href="/blog-two/零基础学python">零基础学python</a></li><li><a href="/blog-two/redis核心技术与实战">redis核心技术与实战</a></li><li><a href="/blog-two/redis源码剖析与实战">redis源码剖析与实战</a></li><li><a href="/blog-two/陈天rust编程第一课">陈天rust编程第一课</a></li><li><a href="/blog-two/tonybaigo语言第一课">tonybaigo语言第一课</a></li><li><a href="/blog-two/深入c语言和程序运行原理">深入c语言和程序运行原理</a></li></ul></span><span>架构师<ul><li><a href="/blog-two/持续交付36讲">持续交付36讲</a></li><li><a href="/blog-two/容器实战高手课">容器实战高手课</a></li><li><a href="/blog-two/ddd实战课">ddd实战课</a></li><li><a href="/blog-two/设计模式之美">设计模式之美</a></li><li><a href="/blog-two/devops实战笔记">devops实战笔记</a></li><li><a href="/blog-two/架构实战案例解析">架构实战案例解析</a></li><li><a href="/blog-two/许式伟的架构课">许式伟的架构课</a></li><li><a href="/blog-two/高并发系统设计40问">高并发系统设计40问</a></li><li><a href="/blog-two/深入剖析kubernetes">深入剖析kubernetes</a></li><li><a href="/blog-two/说透中台">说透中台</a></li><li><a href="/blog-two/消息队列进阶">消息队列进阶</a></li><li><a href="/blog-two/mysql实战45讲">mysql实战45讲</a></li><li><a href="/blog-two/openresty从入门到实战">openresty从入门到实战</a></li><li><a href="/blog-two/赵成的运维体系管理课">赵成的运维体系管理课</a></li><li><a href="/blog-two/性能测试实战30讲">性能测试实战30讲</a></li><li><a href="/blog-two/安全攻防技能30讲">安全攻防技能30讲</a></li><li><a href="/blog-two/从0开始学架构">从0开始学架构</a></li><li><a aria-current="page" class="active" href="/blog-two/vim实用技巧必知必会">vim实用技巧必知必会</a></li><li><a href="/blog-two/如何落地业务建模">如何落地业务建模</a></li><li><a href="/blog-two/技术与商业案例解读">技术与商业案例解读</a></li><li><a href="/blog-two/说透数字化转型">说透数字化转型</a></li><li><a href="/blog-two/遗留系统现代化实战">遗留系统现代化实战</a></li></ul></span><span>管理<ul><li><a href="/blog-two/技术管理实战36讲">技术管理实战36讲</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/项目管理实战课">项目管理实战课</a></li><li><a href="/blog-two/技术面试官识人手册">技术面试官识人手册</a></li><li><a href="/blog-two/技术领导力实战笔记">技术领导力实战笔记</a></li><li><a href="/blog-two/朱赟的技术管理">朱赟的技术管理</a></li></ul></span><span>工作生活<ul><li><a href="/blog-two/10x程序员工作法">10x程序员工作法</a></li><li><a href="/blog-two/python自动化办公实战课">python自动化办公实战课</a></li><li><a href="/blog-two/人人都用得上的写作课">人人都用得上的写作课</a></li><li><a href="/blog-two/体验设计案例课">体验设计案例课</a></li><li><a href="/blog-two/用户体验设计实战课">用户体验设计实战课</a></li><li><a href="/blog-two/程序员的个人财富课">程序员的个人财富课</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/职场求生攻略">职场求生攻略</a></li><li><a href="/blog-two/讲好故事">讲好故事</a></li><li><a href="/blog-two/跟着高手学复盘">跟着高手学复盘</a></li></ul></span><span>杂谈</span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-two/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>后端开发<ul><li><a href="/blog-two/go语言核心36讲">go语言核心36讲</a></li><li><a href="/blog-two/go并发编程实战">go并发编程实战</a></li><li><a href="/blog-two/零基础学python">零基础学python</a></li><li><a href="/blog-two/redis核心技术与实战">redis核心技术与实战</a></li><li><a href="/blog-two/redis源码剖析与实战">redis源码剖析与实战</a></li><li><a href="/blog-two/陈天rust编程第一课">陈天rust编程第一课</a></li><li><a href="/blog-two/tonybaigo语言第一课">tonybaigo语言第一课</a></li><li><a href="/blog-two/深入c语言和程序运行原理">深入c语言和程序运行原理</a></li></ul></li><li>架构师<ul><li><a href="/blog-two/持续交付36讲">持续交付36讲</a></li><li><a href="/blog-two/容器实战高手课">容器实战高手课</a></li><li><a href="/blog-two/ddd实战课">ddd实战课</a></li><li><a href="/blog-two/设计模式之美">设计模式之美</a></li><li><a href="/blog-two/devops实战笔记">devops实战笔记</a></li><li><a href="/blog-two/架构实战案例解析">架构实战案例解析</a></li><li><a href="/blog-two/许式伟的架构课">许式伟的架构课</a></li><li><a href="/blog-two/高并发系统设计40问">高并发系统设计40问</a></li><li><a href="/blog-two/深入剖析kubernetes">深入剖析kubernetes</a></li><li><a href="/blog-two/说透中台">说透中台</a></li><li><a href="/blog-two/消息队列进阶">消息队列进阶</a></li><li><a href="/blog-two/mysql实战45讲">mysql实战45讲</a></li><li><a href="/blog-two/openresty从入门到实战">openresty从入门到实战</a></li><li><a href="/blog-two/赵成的运维体系管理课">赵成的运维体系管理课</a></li><li><a href="/blog-two/性能测试实战30讲">性能测试实战30讲</a></li><li><a href="/blog-two/安全攻防技能30讲">安全攻防技能30讲</a></li><li><a href="/blog-two/从0开始学架构">从0开始学架构</a></li><li><a aria-current="page" class="active" href="/blog-two/vim实用技巧必知必会">vim实用技巧必知必会</a></li><li><a href="/blog-two/如何落地业务建模">如何落地业务建模</a></li><li><a href="/blog-two/技术与商业案例解读">技术与商业案例解读</a></li><li><a href="/blog-two/说透数字化转型">说透数字化转型</a></li><li><a href="/blog-two/遗留系统现代化实战">遗留系统现代化实战</a></li></ul></li><li>管理<ul><li><a href="/blog-two/技术管理实战36讲">技术管理实战36讲</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/项目管理实战课">项目管理实战课</a></li><li><a href="/blog-two/技术面试官识人手册">技术面试官识人手册</a></li><li><a href="/blog-two/技术领导力实战笔记">技术领导力实战笔记</a></li><li><a href="/blog-two/朱赟的技术管理">朱赟的技术管理</a></li></ul></li><li>工作生活<ul><li><a href="/blog-two/10x程序员工作法">10x程序员工作法</a></li><li><a href="/blog-two/python自动化办公实战课">python自动化办公实战课</a></li><li><a href="/blog-two/人人都用得上的写作课">人人都用得上的写作课</a></li><li><a href="/blog-two/体验设计案例课">体验设计案例课</a></li><li><a href="/blog-two/用户体验设计实战课">用户体验设计实战课</a></li><li><a href="/blog-two/程序员的个人财富课">程序员的个人财富课</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/职场求生攻略">职场求生攻略</a></li><li><a href="/blog-two/讲好故事">讲好故事</a></li><li><a href="/blog-two/跟着高手学复盘">跟着高手学复盘</a></li></ul></li><li>杂谈</li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog-two/vim实用技巧必知必会">vim实用技巧必知必会</a></li><li><a href="/blog-two/vim实用技巧必知必会/01.课前必读">01.课前必读</a><ul><li><a href="/blog-two/vim实用技巧必知必会/01.课前必读/01"><span>开篇词｜我们为什么要学 Vim？</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/01.课前必读/02"><span>导读｜池建强：Vim 就是四个字“唯快不破”</span></a></li></ul></li><li><a href="/blog-two/vim实用技巧必知必会/02.基础篇">02.基础篇</a><ul><li><a href="/blog-two/vim实用技巧必知必会/02.基础篇/01"><span>01｜各平台下的 Vim 安装方法：上路前准备好你的宝马</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/02.基础篇/02"><span>02｜基本概念和基础命令：应对简单的编辑任务</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/02.基础篇/03"><span>03｜更多常用命令：应对稍复杂的编辑任务</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/02.基础篇/04"><span>04｜初步定制：让你的 Vim 更顺手</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/02.基础篇/05"><span>05｜多文件打开与缓冲区：复制粘贴的正确姿势</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/02.基础篇/06"><span>06｜窗口和标签页：修改、对比多个文件的正确姿势</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/02.基础篇/07"><span>07｜正则表达式：实现文件内容的搜索和替换</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/02.基础篇/08"><span>08｜基本编程支持：规避、解决编程时的常见问题</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/02.基础篇/09"><span>09｜七大常用技巧：让编辑效率再上一个台阶</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/02.基础篇/10"><span>10｜代码重构实验：在实战中提高编辑熟练度</span></a></li></ul></li><li><a href="/blog-two/vim实用技巧必知必会/03.提高篇">03.提高篇</a><ul><li><a href="/blog-two/vim实用技巧必知必会/03.提高篇/01"><span>11｜文本的细节：关于字符、编码、行你所需要知道的一切</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/03.提高篇/02"><span>12｜语法加亮和配色方案：颜即正义</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/03.提高篇/03"><span>13｜YouCompleteMe：Vim 里的自动完成</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/03.提高篇/04"><span>14｜Vim 脚本简介：开始你的深度定制</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/03.提高篇/05"><span>15｜插件荟萃：不可或缺的插件</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/03.提高篇/06"><span>16｜终端和 GDB 支持：不离开 Vim 完成开发任务</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog-two/vim实用技巧必知必会/04.拓展篇">04.拓展篇</a><ul><li><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/01"><span>拓展1｜纯文本编辑：使用 Vim 书写中英文文档</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/02"><span>拓展2｜C 程序员的 Vim 工作环境：C 代码的搜索、提示和自动完成</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/03"><span>拓展3｜Python 程序员的 Vim 工作环境：完整的 Python 开发环境</span></a></li><li><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/04"><span>拓展4 | 插件样例分析：自己动手改进插件</span></a></li><li><a aria-current="page" class="active" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05"><span>拓展5 | 其他插件和技巧：吴咏炜的箱底私藏</span></a></li></ul></li><li><a href="/blog-two/vim实用技巧必知必会/05.结束语">05.结束语</a><ul><li><a href="/blog-two/vim实用技巧必知必会/05.结束语/01"><span>结束语｜Vim 森林探秘，一切才刚刚开始</span></a></li></ul></li><li><a href="/blog-two/vim实用技巧必知必会/06.测试题">06.测试题</a><ul><li><a href="/blog-two/vim实用技巧必知必会/06.测试题/01"><span>结课测试｜这些 Vim 的知识你都掌握了吗？</span></a></li></ul></li><li><a href="/blog-two/vim实用技巧必知必会/summary">vim实用技巧必知必会</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="插件" data-depth="2"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#插件"><span>插件</span></a></li><li title="Syntastic 和 ALE" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#syntastic-和-ale"><span>Syntastic 和 ALE</span></a></li><li title="Renamer" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#renamer"><span>Renamer</span></a></li><li title="Undowarning" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#undowarning"><span>Undowarning</span></a></li><li title="Rainbow" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#rainbow"><span>Rainbow</span></a></li><li title="Auto-pairs" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#auto-pairs"><span>Auto-pairs</span></a></li><li title="Largefile" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#largefile"><span>Largefile</span></a></li><li title="Markdown Preview" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#markdown-preview"><span>Markdown Preview</span></a></li><li title="Calendar" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#calendar"><span>Calendar</span></a></li><li title="Matrix" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#matrix"><span>Matrix</span></a></li><li title="Killersheep" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#killersheep"><span>Killersheep</span></a></li><li title="技巧" data-depth="2"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#技巧"><span>技巧</span></a></li><li title="行过滤" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#行过滤"><span>行过滤</span></a></li><li title="自动关闭最后一个 quickfix 窗口" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#自动关闭最后一个-quickfix-窗口"><span>自动关闭最后一个 quickfix 窗口</span></a></li><li title="Home 键的行为" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#home-键的行为"><span>Home 键的行为</span></a></li><li title="查看光标下字符的内码" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#查看光标下字符的内码"><span>查看光标下字符的内码</span></a></li><li title="为什么是 42？" data-depth="3"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#为什么是-42"><span>为什么是 42？</span></a></li><li title="内容小结" data-depth="2"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#内容小结"><span>内容小结</span></a></li><li title="课后练习" data-depth="2"><a href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#课后练习"><span>课后练习</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="拓展5--其他插件和技巧吴咏炜的箱底私藏"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#拓展5--其他插件和技巧吴咏炜的箱底私藏"><span class="icon icon-link"></span></a>拓展5 | 其他插件和技巧：吴咏炜的箱底私藏</h1><p>你好，我是吴咏炜。</p><p>上一讲我介绍了最重要的一些插件。今天这讲拓展，我们就算是查漏补缺，再分享一些我个人这些年压箱底的收藏。这些插件和技巧有新有旧，都非常好用，欢迎你挑选感兴趣的内容，纳入自己的个人收藏箱。</p><h2 id="插件"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#插件"><span class="icon icon-link"></span></a>插件</h2><h3 id="syntastic-和-ale"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#syntastic-和-ale"><span class="icon icon-link"></span></a>Syntastic 和 ALE</h3><p>说到代码检查插件，我最早是从 <a target="_blank" rel="noopener noreferrer" href="https://github.com/vim-syntastic/syntastic">Syntastic<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 开始用的，然后慢慢转向了 <a target="_blank" rel="noopener noreferrer" href="https://github.com/dense-analysis/ale">ALE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。不过，我因为主要写 C++ 和 Python，所以慢慢放弃了使用这两个插件，转而使用对这两种语言支持较好的 YCM（第 13 讲）和 Python-mode（拓展 3）。</p><p>虽然 YCM 和 Python-mode 集成的工具比较有限，比如 YCM 对 C++ 的代码检查仅限于 Clang 系列工具提供的支持，而不像 Syntastic/ALE 还可以选择很多其他的工具，但是，它们对我来讲还是够用了——何况对于 C 和 C++，要让 Syntastic 或 ALE 干活的话，大部分情况下需要配置头文件包含路径和编译选项，也是件麻烦事。</p><p>不过，对于其他语言的开发者，Syntastic/ALE 可能还是非常有用的。</p><p>先说 Syntastic。这是一个老牌的代码检查插件，其 1.0 版本发布在 2009 年。这些年下来，这个插件里积累了好几十种语言的代码检查支持，既有常见的 C、C++、Python、Java、JavaScript 等语言，也有冷门一点的 ACPI、AppleScript、Julia、VHDL、z80 汇编等语言。对于每种语言，它能自动识别已经安装的代码检查器，并在你文件存盘时自动检查代码（也可以手工使用 <code>:SyntasticCheck</code> 命令来检查）。要检查当前文件 Syntastic 识别到了哪些代码检查器，可以使用 <code>:SyntasticInfo</code> 命令；而在 ALE 中没有等价的好用命令。</p><p>Syntastic 的主要问题是它的检查是同步的，代码检查时你不能同时进行编辑工作：不但不能即输即查，而且耗时长的检查还会中断正常的编辑流程。后起之秀 ALE 恰恰解决了这个问题，它会异步地检查你的代码，在编辑时即输即查，完全不会影响正常的编辑流程。从支持的语言上来说，ALE 虽然不及 Syntastic，但也已经覆盖到了大量的冷门语言。并且，它仍然处于积极开发之中：2020 年 7 月，Syntastic 一共有 3 次提交，而 ALE 有 48 次非合并提交和 13 次合并提交！</p><p>这两个插件的配置都略显复杂，通常需要你针对每种代码检查器进行配置。因此，总体来说，我对代码检查的推荐顺序是：</p><ol><li>使用 YCM、Python-mode、Vim-go 等有语言针对性的插件，如果你用的语言被支持，并且插件集成的代码检查功能够用的话</li><li>使用 ALE，如果你的语言和代码检查插件它能够支持的话</li><li>使用 Syntastic，如果其他选项不适用，或者你需要的检查执行够快的话</li></ol><h3 id="renamer"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#renamer"><span class="icon icon-link"></span></a>Renamer</h3><p>在需要对文件进行批量更名时，我会使用 <a target="_blank" rel="noopener noreferrer" href="http://github.com/qpkorr/vim-renamer">qpkorr/vim-renamer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 插件。它提供 <code>:Renamer</code> 命令，会打开当前目录下所有文件的列表。你随后就可以利用 Vim 强大的正则表达式和编辑功能来调整这些名字了。在调整完成后，执行 <code>:Ren</code> 命令即可。</p><p><img src="https://static001.geekbang.org/resource/image/52/d4/5220906bc8fc3afb09aab05f27bcdfd4.png" alt="FigX5.1" title="Renamer 的界面（额外展开了一层目录）"/></p><p>注意，图中的第二、三行提供了命令的说明，比如用 <code>&gt;</code> 来多展开一层目录，等等。你应该只做行内的修改，而不去删除行或调整行的顺序，否则可能引致意外的后果。使用 <code>&lt;C-Del&gt;</code> 可以删除当前行的文件，这算是一种例外情况。</p><p>在图中，我只是手工修改了“log.conf”那行的文件名。更常见的情况是利用 Vim 的编辑功能做批量操作。比如，你需要把文件名变成小写，可以选中要修改的部分然后使用 <code>gu</code> 命令。又比如，如果你的文件里有大量的编号，你希望对编号进行增减的操作，也可以利用 Vim 的 <code>&lt;C-A&gt;</code> 和 <code>&lt;C-X&gt;</code> 来对编号进行加减操作。当然，这时你可能需要使用可视模式的列选择（<code>&lt;C-V&gt;</code>）。</p><p>你还有可能需要注意一下选项 <code>nrformats</code>，因为如果其中含有 <code>octal</code> 的话，Vim 会把 <code>0</code> 打头的数字序列当成八进制来处理。还好，如果你按照我目前给出的方式来设置 vimrc 配置文件的话，缺省里面不含 <code>octal</code>，只会对 <code>0b</code> 和 <code>0x</code> 打头的数字做特别处理，这就不会跟普通的十进制数字编号有任何冲突了。</p><h3 id="undowarning"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#undowarning"><span class="icon icon-link"></span></a>Undowarning</h3><p>Vim 里有跨会话撤销修改的功能，这当然是它的强大的特色功能。不过，有时候也许你会发现，不小心多按了几下 <code>u</code>，你就退回到打开文件之前的版本去了。我想，这很有可能不是你想要的行为吧？如果你，像我一样，希望能够无限制地进行编辑撤销，同时还想在退回打开文件的状态之前能有一个提醒，那 undowarning.vim 可能就是你想要的。</p><p>这个插件不支持用包管理器自动安装。你需要自行下载 <a target="_blank" rel="noopener noreferrer" href="https://github.com/thoughtstream/Damian-Conway-s-Vim-Setup/blob/master/plugin/undowarnings.vim">undowarning.vim<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，并把它放到你的 Vim 配置目录的 plugin 子目录下。下图是一个运行中的示例：</p><p><img src="https://static001.geekbang.org/resource/image/1d/49/1db7f1ccc892a8217a54819346435249.gif" alt="FigX5.2" title="Undowarning 的效果"/></p><h3 id="rainbow"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#rainbow"><span class="icon icon-link"></span></a>Rainbow</h3><p>代码中括号多了，有时候眼睛就有点看不过来，需要有个更好的颜色提示。因此，就有了很多彩虹效果的 Vim 插件。在这些插件中，我最喜欢的是 <a target="_blank" rel="noopener noreferrer" href="https://github.com/frazrepo/vim-rainbow">frazrepo/vim-rainbow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，它最妙的地方是，居然能把 C++ 代码中的尖括号也进行加亮，还能基本不会在出现小于、大于、流输入输出时进行错误的加亮。效果见下图：</p><p><img src="https://static001.geekbang.org/resource/image/3e/d0/3e141f1c2d3883dd8384182d4bc72bd0.png" alt="FigX5.3" title="彩虹括号的效果"/></p><p>效果默认不自动启用，可以用 <code>:RainbowToggle</code> 命令来切换，或用 <code>:RainbowLoad</code> 命令来加载。我觉得在括号多的时候按需启用挺好，推荐！</p><h3 id="auto-pairs"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#auto-pairs"><span class="icon icon-link"></span></a>Auto-pairs</h3><p>代码中永远有着大量成双成对的符号，输入一个，就自动出来另一个，会是一个非常有用的功能。但这样的功能，也需要处理一些特殊情况，比如，如果程序员输入了一对符号 <code>()</code>，结果千万不能是 <code>())</code>。在很多现代的编辑器上，这已经是个标准功能了，但 Vim 一直没有类似的功能。</p><p>实际上，Vim 里已经有插件 <a target="_blank" rel="noopener noreferrer" href="https://github.com/jiangmiao/auto-pairs">jiangmiao/auto-pairs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 支持了这个功能，并解决了大部分边角情况。我觉得可以推荐给大家。</p><p>这个插件，要不要推荐我还是犹豫了一下的。我一开始对它相当满意，但后来我发现仍然有一些边角情况处理不好，使用它就会导致无法编辑出我需要的效果。所以我又把它卸载了。但再后来，我又觉得，毕竟瑕不掩瑜，而且有问题时把它禁用不就得了！</p><p>所以，它的配置项我也只需要提一个，就是禁用的键映射。这个键映射由全局变量 <code>g:AutoPairsShortcutToggle</code> 控制，默认值是 <code>&lt;M-p&gt;</code>。如果你在 Mac 上，这个键多半就不工作了，除非你只在 Mac 终端里使用 Vim，并且在终端应用里配置了“将 Option 键用作 Meta 键”。对于大部分 Mac 用户，你需要进行类似下面的配置（因为 Mac 上按 Option-P 会产生“π”）：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">let g:AutoPairsShortcutToggle = &#x27;π&#x27;</span></div></pre></div><p>其他内容就请自行查看它的帮助文件了。</p><h3 id="largefile"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#largefile"><span class="icon icon-link"></span></a>Largefile</h3><p>如果你经常打开很大的日志文件，那 Vim 的一些自动功能可能不仅帮不了什么忙，反而会拖慢你的编辑速度。有一个 Vim 插件能在文件较大时自动关闭事件处理、撤销、语法加亮等功能，用来换取更快的处理速度和更短的响应时间。这个插件就是 <a target="_blank" rel="noopener noreferrer" href="https://github.com/vim-scripts/LargeFile">vim-scripts/LargeFile<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><p>这个插件的功能比较简单，唯一需要配置的就是多大算大。你只需要在 vimrc 配置文件中把你对大文件的阈值（以 MB 为单位）写到 <code>g:LargeFile</code> 变量里即可。比如，如果你认为超过 100MB 算大文件，那我们这样写就可以了：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">let g:LargeFile = 100</span></div></pre></div><h3 id="markdown-preview"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#markdown-preview"><span class="icon icon-link"></span></a>Markdown Preview</h3><p>你如果像我一样常常写 Markdown 的话，你应该会喜欢 <a target="_blank" rel="noopener noreferrer" href="https://github.com/iamcco/markdown-preview.nvim">Markdown Preview<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这个插件。Markdown 本来最适用的场景就是浏览器，纯文本的 Vim 只能编辑，没有好的预览终究是很不足的。Markdown Preview 解决了这个问题，让你在编辑的同时，可以在浏览器里看到实际的渲染效果。更令我吃惊的是，这个预览是完全实时、同步的，无需存盘，而且预览页面随着光标在 Vim 里移动而跟着滚动，效果相当酷。你可以直接到 Markdown Preview 的主页上看一下官方的示意图，我就不在这里放动图了。</p><p>这个插件唯一需要特别注意的是，你不能直接把 iamcco/markdown-preview.nvim 放到你的包管理器里了事。原因是它里面包含了需要编译的前端组件，需要下载或编译才行。在它的主页上描述了在不同包管理器里的安装方式，你只要跟着照做就行。</p><p>它的配置在主页上也有列表，但默认设置就已经完全可用了。如果有需求的话，你可以修改其中部分值，如 <code>g:mkdp_browser</code> 可以用来设定你希望打开页面的浏览器（我目前设的是 <code>&#x27;firefox&#x27;</code>）。</p><h3 id="calendar"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#calendar"><span class="icon icon-link"></span></a>Calendar</h3><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/mattn/calendar-vim">Calendar<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一个很简单的显示日历的 Vim 插件，在包管理器里的名字是 mattn/calendar-vim。它的功能应该就不需要解释了，效果可以直接查看下图。</p><p><img src="https://static001.geekbang.org/resource/image/b0/ea/b020f95be4c0ee37683b2178ef7ccbea.png" alt="FigX5.4" title=":CalendarH 产生的水平日历"/></p><p>这个插件支持一些不同的样式和分割方式，上图中就是用 <code>:CalendarH</code>（或正常模式命令 <code>caL</code>）进行的横向分割，同时横向显示日历，你也可以用 <code>:Calendar</code>（或正常模式命令 <code>cal</code>）进行纵向分割和日历显示。此外，它还支持其他一些命令和组合。鉴于这个插件的的帮助文件也不长，如果你对相关功能有兴趣的话，就请你自己去看一下了。</p><h3 id="matrix"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#matrix"><span class="icon icon-link"></span></a>Matrix</h3><p>上面介绍的插件，不管对你有没有用，都可以说是“有用”的。插件也不一定要做有用的事，我的机器一直装着下面这个“没用”的插件，<a target="_blank" rel="noopener noreferrer" href="https://github.com/uguu-org/vim-matrix-screensaver">uguu-org/vim-matrix-screensaver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><p>它的效果不用解释，直接看下面的动图就好。</p><p><img src="https://static001.geekbang.org/resource/image/d9/7f/d96a5b5e193951fd8e3943yy3b97d67f.gif" alt="FigX5.5" title="Matrix!"/></p><h3 id="killersheep"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#killersheep"><span class="icon icon-link"></span></a>Killersheep</h3><p>Vim 脚本不仅可以做没用的事情，还可以更进一步做娱乐的事情。比如，Vim 的作者 Bram 亲自操刀写了这个“愚蠢的游戏”，<a target="_blank" rel="noopener noreferrer" href="https://github.com/vim/killersheep">vim/killersheep<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><p>这当然不是一个真正非常好玩的游戏，不过我也玩通关了。你不妨也试试？小提示：屏幕拉高点，按键重复速度快点，重复前延迟短一点，这样更有助于你打好这个游戏。</p><p>当然，这个插件的本来意义就不是一个游戏，而是要演示 Vim 8.2 的下列新功能：</p><ul><li>带颜色和掩码的的弹出窗口</li><li>用于高亮文本的文本属性</li><li>声音</li></ul><p>如果你想用这些功能的话，就可以去看看这个插件的源码。这也算一种寓教于乐吧？</p><h2 id="技巧"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#技巧"><span class="icon icon-link"></span></a>技巧</h2><h3 id="行过滤"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#行过滤"><span class="icon icon-link"></span></a>行过滤</h3><p>在编辑日志等类型的文本时，我们往往想过滤出我们感兴趣的内容。这时，我们可以用正则表达式，但使用 <code>:s</code> 命令并不是一种最高效的方式。如果你感兴趣的每一行都可以跟某个正则表达式模式匹配（如日期、某关键字等），最高效的命令应该是：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">:v/匹配模式/d</span></div></pre></div><p>稍微解释一下，<code>:v</code> 命令（可以查看帮助 <a target="_blank" rel="noopener noreferrer" href="https://yianwillis.github.io/vimcdoc/doc/repeat.html#:v"><code>:help :v</code></a>）可以用来找出不符合匹配模式的行（对比一下 <code>grep \-v</code> 命令），然后执行后面的动作。所以上面的命令就是找出不满足匹配模式的行，然后执行删除（<code>d</code>）。</p><p>顺便说一下，如果你需要找出符合匹配模式的行，需要的命令是 <code>:g</code>（可以查看帮助 <a target="_blank" rel="noopener noreferrer" href="https://yianwillis.github.io/vimcdoc/doc/repeat.html#:g"><code>:help :g</code></a>）。</p><h3 id="自动关闭最后一个-quickfix-窗口"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#自动关闭最后一个-quickfix-窗口"><span class="icon icon-link"></span></a>自动关闭最后一个 quickfix 窗口</h3><p>我们已经讨论到很多功能会用到 quickfix 窗口。如果打开 quickfix 窗口后，你关闭了编辑的主窗口，那 quickfix 窗口可能就成为这个 Vim 会话里剩下的唯一窗口了，而这个窗口多半你完全不再需要。你会希望，此时 Vim 应该自动关闭这个窗口直接退出。这当然是个可以用程序自动化的事情，所以我们也应该这样做，用下面的脚本放到 vimrc 配置文件里就可以做到：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">aug QFClose</span></div><div class="token-line"><span class="token plain">      au!</span></div><div class="token-line"><span class="token plain">      au WinEnter *  if winnr(&#x27;$&#x27;) == 1 &amp;&amp; &amp;buftype == &quot;quickfix&quot;|q|endif</span></div><div class="token-line"><span class="token plain">    aug END</span></div></pre></div><p>你只要查一下 <code>winnr</code> 函数的帮助（<a target="_blank" rel="noopener noreferrer" href="https://yianwillis.github.io/vimcdoc/doc/eval.html#winnr()"><code>:help winnr()</code></a>）就很容易理解了，代码的意思还是非常清楚的：如果窗口的数量是 1 并且缓冲区类型是 quickfix 的话，那就退出 Vim。为了确保重复执行这段代码没有问题，它有一个自己的自动命令组，并会在清除这个自动命令组的所有自动命令后在进入窗口（WinEnter）这个事件中进行上面的检查。</p><p>（本技巧来自这个 <a target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/a/7477056/816999">Stack Overflow 回答<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。）</p><h3 id="home-键的行为"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#home-键的行为"><span class="icon icon-link"></span></a>Home 键的行为</h3><p>对于大部分现代的编辑器，Home 键的行为通常是：</p><ul><li>当光标处于本行第一个非空白字符上时，跳转到行首</li><li>否则，跳转到本行第一个非空白字符上</li></ul><p>虽然 Vim 的行为不是这样，但如果你希望配置出这样的行为，也不麻烦，把下面的代码加入到你的 vimrc 配置文件即可：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">function! GoToFirstNonBlankOrFirstColumn()</span></div><div class="token-line"><span class="token plain">      let cur_col = col(&#x27;.&#x27;)</span></div><div class="token-line"><span class="token plain">      normal! ^</span></div><div class="token-line"><span class="token plain">      if cur_col != 1 &amp;&amp; cur_col == col(&#x27;.&#x27;)</span></div><div class="token-line"><span class="token plain">        normal! 0</span></div><div class="token-line"><span class="token plain">      endif</span></div><div class="token-line"><span class="token plain">      return &#x27;&#x27;</span></div><div class="token-line"><span class="token plain">    endfunction</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    nnoremap &lt;silent&gt; &lt;Home&gt; :call GoToFirstNonBlankOrFirstColumn()&lt;CR&gt;</span></div><div class="token-line"><span class="token plain">    inoremap &lt;silent&gt; &lt;Home&gt; &lt;C-R&gt;=GoToFirstNonBlankOrFirstColumn()&lt;CR&gt;</span></div></pre></div><p>在这个代码里，<code>col(&#x27;.&#x27;)</code> 用来获取光标所在的列号，然后我们跳转到第一个非空白字符处（<code>^</code>），随后检查是不是我们不在第 1 列并且列号没有变化。如果是的话，说明第一个非空白字符不在行首并且当前光标已经在第一个非空白字符处了，那我们就跳转到行首去（<code>0</code>）。</p><p>另外要注意，我们这儿使用了 <code>normal!</code> 而不是 <code>normal</code>。这两者的区别是，用了 <code>!</code> 的 <code>normal</code> 命令会忽略键映射，否则 <code>normal</code> 就跟正常按键一样了。为了防止其他地方定义了键映射导致行为变化，一般推荐 <code>normal!</code> 命令而不是 <code>normal</code> 命令。</p><p>我们这样就修改了正常模式和插入模式下的 Home 键的行为。目前，在可视模式下这个方式不适用，你仍然只能手工选择合适的 <code>0</code> 或 <code>^</code> 命令。</p><h3 id="查看光标下字符的内码"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#查看光标下字符的内码"><span class="icon icon-link"></span></a>查看光标下字符的内码</h3><p>有很多字符是很相似的，在 Vim 使用的等宽字体中尤其如此。比如，光看字形，你能区分下面这些字符分别是什么吗？</p><ul><li><code>- – — − ─</code></li></ul><p>这些字符看起来虽然相似，但它们的意义是完全不同的。特别是在源代码中，如果你一不小心混入了一个相似的字符（字处理器有时候会自动替换一些 ASCII 字符，造成这种问题），代码运行就会出错了。这时，<code>ga</code> 命令就可以帮上忙。</p><p>下图展示了 <code>ga</code> 命令的一次执行结果：</p><p><img src="https://static001.geekbang.org/resource/image/a1/74/a193f0d446ff7d5edcebfbc0e7494774.png" alt="FigX5.6" title="执行 ga 命令的结果"/></p><p>我们可以看到这个字符实际上是 Unicode 字符 U+2013（十进制和八进制数值分别是 8211 和 20023），短破折号。这个字符在很多键盘上不能直接打出来，因而 Vim 提供了二合字母（digraph），可以用 <code>&lt;C-K&gt;-N</code> 的方式来输入。</p><h3 id="为什么是-42"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#为什么是-42"><span class="icon icon-link"></span></a>为什么是 42？</h3><p>好吧，最后这个不是技巧。你可能会奇怪：为什么在讲编程的很多代码里会出现 42 这个数字呢？那其实是因为一个科幻小说的“梗”。事实上，我在这个课程里也用到了 42。要想获取进一步的信息，请在 Vim 里输入：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">:help 42</span></div></pre></div><h2 id="内容小结"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#内容小结"><span class="icon icon-link"></span></a>内容小结</h2><p>本讲的内容比较零散，我为你介绍了一些我认为值得介绍的插件和技巧，每一则篇幅都较短，我也就不再正式总结了。</p><p>我分享的这些内容大部分是有用的，但也有一部分可以认为基本是“无用”的。生活里如果要求每一件事情都有用，岂不是会变得非常无趣？对我来说，编程和编程工具也是如此。</p><h2 id="课后练习"><a aria-hidden="true" tabindex="-1" href="/blog-two/vim实用技巧必知必会/04.拓展篇/05#课后练习"><span class="icon icon-link"></span></a>课后练习</h2><p>今天介绍的插件和技巧，虽说不能算必需，也是非常有意义的。强烈建议你挑至少三个来安装/实验一下。如有任何问题或意见，欢迎留言和我交流。</p><p>我是吴咏炜，我们下一讲再见！</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/docs/vim实用技巧必知必会/04.拓展篇/05.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">5/2/2022 02:41:35</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog-two/umi.js"></script>
  </body>
</html>
