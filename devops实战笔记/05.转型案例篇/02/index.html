<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog-two/umi.css" />
    <script>
      window.routerBase = "/blog-two";
    </script>
    <script>
      //! umi version: 3.5.17
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.indexOf(e) > -1 ? e : r[0]
        );
      })();
    </script>
    <title>30 | 向前一步：万人规模企业的DevOps实战转型案例（下）</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/devops实战笔记/05.转型案例篇/02" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-two/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>后端开发<ul><li><a href="/blog-two/go语言核心36讲">go语言核心36讲</a></li><li><a href="/blog-two/go并发编程实战">go并发编程实战</a></li><li><a href="/blog-two/零基础学python">零基础学python</a></li><li><a href="/blog-two/redis核心技术与实战">redis核心技术与实战</a></li><li><a href="/blog-two/redis源码剖析与实战">redis源码剖析与实战</a></li><li><a href="/blog-two/陈天rust编程第一课">陈天rust编程第一课</a></li><li><a href="/blog-two/tonybaigo语言第一课">tonybaigo语言第一课</a></li><li><a href="/blog-two/深入c语言和程序运行原理">深入c语言和程序运行原理</a></li></ul></span><span>架构师<ul><li><a href="/blog-two/持续交付36讲">持续交付36讲</a></li><li><a href="/blog-two/容器实战高手课">容器实战高手课</a></li><li><a href="/blog-two/ddd实战课">ddd实战课</a></li><li><a href="/blog-two/设计模式之美">设计模式之美</a></li><li><a aria-current="page" class="active" href="/blog-two/devops实战笔记">devops实战笔记</a></li><li><a href="/blog-two/架构实战案例解析">架构实战案例解析</a></li><li><a href="/blog-two/许式伟的架构课">许式伟的架构课</a></li><li><a href="/blog-two/高并发系统设计40问">高并发系统设计40问</a></li><li><a href="/blog-two/深入剖析kubernetes">深入剖析kubernetes</a></li><li><a href="/blog-two/说透中台">说透中台</a></li><li><a href="/blog-two/消息队列进阶">消息队列进阶</a></li><li><a href="/blog-two/mysql实战45讲">mysql实战45讲</a></li><li><a href="/blog-two/openresty从入门到实战">openresty从入门到实战</a></li><li><a href="/blog-two/赵成的运维体系管理课">赵成的运维体系管理课</a></li><li><a href="/blog-two/性能测试实战30讲">性能测试实战30讲</a></li><li><a href="/blog-two/安全攻防技能30讲">安全攻防技能30讲</a></li><li><a href="/blog-two/从0开始学架构">从0开始学架构</a></li><li><a href="/blog-two/vim实用技巧必知必会">vim实用技巧必知必会</a></li><li><a href="/blog-two/如何落地业务建模">如何落地业务建模</a></li><li><a href="/blog-two/技术与商业案例解读">技术与商业案例解读</a></li><li><a href="/blog-two/说透数字化转型">说透数字化转型</a></li><li><a href="/blog-two/遗留系统现代化实战">遗留系统现代化实战</a></li></ul></span><span>管理<ul><li><a href="/blog-two/技术管理实战36讲">技术管理实战36讲</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/项目管理实战课">项目管理实战课</a></li><li><a href="/blog-two/技术面试官识人手册">技术面试官识人手册</a></li><li><a href="/blog-two/技术领导力实战笔记">技术领导力实战笔记</a></li><li><a href="/blog-two/朱赟的技术管理">朱赟的技术管理</a></li></ul></span><span>工作生活<ul><li><a href="/blog-two/10x程序员工作法">10x程序员工作法</a></li><li><a href="/blog-two/python自动化办公实战课">python自动化办公实战课</a></li><li><a href="/blog-two/人人都用得上的写作课">人人都用得上的写作课</a></li><li><a href="/blog-two/体验设计案例课">体验设计案例课</a></li><li><a href="/blog-two/用户体验设计实战课">用户体验设计实战课</a></li><li><a href="/blog-two/程序员的个人财富课">程序员的个人财富课</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/职场求生攻略">职场求生攻略</a></li><li><a href="/blog-two/讲好故事">讲好故事</a></li><li><a href="/blog-two/跟着高手学复盘">跟着高手学复盘</a></li></ul></span><span>杂谈</span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-two/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>后端开发<ul><li><a href="/blog-two/go语言核心36讲">go语言核心36讲</a></li><li><a href="/blog-two/go并发编程实战">go并发编程实战</a></li><li><a href="/blog-two/零基础学python">零基础学python</a></li><li><a href="/blog-two/redis核心技术与实战">redis核心技术与实战</a></li><li><a href="/blog-two/redis源码剖析与实战">redis源码剖析与实战</a></li><li><a href="/blog-two/陈天rust编程第一课">陈天rust编程第一课</a></li><li><a href="/blog-two/tonybaigo语言第一课">tonybaigo语言第一课</a></li><li><a href="/blog-two/深入c语言和程序运行原理">深入c语言和程序运行原理</a></li></ul></li><li>架构师<ul><li><a href="/blog-two/持续交付36讲">持续交付36讲</a></li><li><a href="/blog-two/容器实战高手课">容器实战高手课</a></li><li><a href="/blog-two/ddd实战课">ddd实战课</a></li><li><a href="/blog-two/设计模式之美">设计模式之美</a></li><li><a aria-current="page" class="active" href="/blog-two/devops实战笔记">devops实战笔记</a></li><li><a href="/blog-two/架构实战案例解析">架构实战案例解析</a></li><li><a href="/blog-two/许式伟的架构课">许式伟的架构课</a></li><li><a href="/blog-two/高并发系统设计40问">高并发系统设计40问</a></li><li><a href="/blog-two/深入剖析kubernetes">深入剖析kubernetes</a></li><li><a href="/blog-two/说透中台">说透中台</a></li><li><a href="/blog-two/消息队列进阶">消息队列进阶</a></li><li><a href="/blog-two/mysql实战45讲">mysql实战45讲</a></li><li><a href="/blog-two/openresty从入门到实战">openresty从入门到实战</a></li><li><a href="/blog-two/赵成的运维体系管理课">赵成的运维体系管理课</a></li><li><a href="/blog-two/性能测试实战30讲">性能测试实战30讲</a></li><li><a href="/blog-two/安全攻防技能30讲">安全攻防技能30讲</a></li><li><a href="/blog-two/从0开始学架构">从0开始学架构</a></li><li><a href="/blog-two/vim实用技巧必知必会">vim实用技巧必知必会</a></li><li><a href="/blog-two/如何落地业务建模">如何落地业务建模</a></li><li><a href="/blog-two/技术与商业案例解读">技术与商业案例解读</a></li><li><a href="/blog-two/说透数字化转型">说透数字化转型</a></li><li><a href="/blog-two/遗留系统现代化实战">遗留系统现代化实战</a></li></ul></li><li>管理<ul><li><a href="/blog-two/技术管理实战36讲">技术管理实战36讲</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/项目管理实战课">项目管理实战课</a></li><li><a href="/blog-two/技术面试官识人手册">技术面试官识人手册</a></li><li><a href="/blog-two/技术领导力实战笔记">技术领导力实战笔记</a></li><li><a href="/blog-two/朱赟的技术管理">朱赟的技术管理</a></li></ul></li><li>工作生活<ul><li><a href="/blog-two/10x程序员工作法">10x程序员工作法</a></li><li><a href="/blog-two/python自动化办公实战课">python自动化办公实战课</a></li><li><a href="/blog-two/人人都用得上的写作课">人人都用得上的写作课</a></li><li><a href="/blog-two/体验设计案例课">体验设计案例课</a></li><li><a href="/blog-two/用户体验设计实战课">用户体验设计实战课</a></li><li><a href="/blog-two/程序员的个人财富课">程序员的个人财富课</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/职场求生攻略">职场求生攻略</a></li><li><a href="/blog-two/讲好故事">讲好故事</a></li><li><a href="/blog-two/跟着高手学复盘">跟着高手学复盘</a></li></ul></li><li>杂谈</li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog-two/devops实战笔记">devops实战笔记</a></li><li><a href="/blog-two/devops实战笔记/01.开篇词">01.开篇词</a><ul><li><a href="/blog-two/devops实战笔记/01.开篇词/01"><span>开篇词 | 从默默无闻到风靡全球，DevOps究竟有什么魔力？</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/02.基础理论篇">02.基础理论篇</a><ul><li><a href="/blog-two/devops实战笔记/02.基础理论篇/01"><span>01 | DevOps的“定义”：DevOps究竟要解决什么问题？</span></a></li><li><a href="/blog-two/devops实战笔记/02.基础理论篇/02"><span>02 | DevOps的价值：数字化转型时代，DevOps是必选项？</span></a></li><li><a href="/blog-two/devops实战笔记/02.基础理论篇/03"><span>03 | DevOps的实施：到底是工具先行还是文化先行？</span></a></li><li><a href="/blog-two/devops实战笔记/02.基础理论篇/04"><span>04 | DevOps的衡量：你是否找到了DevOps的实施路线图？</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇">03.落地实践篇</a><ul><li><a href="/blog-two/devops实战笔记/03.落地实践篇/01"><span>05 | 价值流分析：关于DevOps转型，我们应该从何处入手？</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/02"><span>06 | 转型之路：企业实施DevOps的常见路径和问题</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/03"><span>07 | 业务敏捷：帮助DevOps快速落地的源动力</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/04"><span>08 | 精益看板（上）：精益驱动的敏捷开发方法</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/05"><span>09 | 精益看板（下）：精益驱动的敏捷开发方法</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/06"><span>10 | 配置管理：最容易被忽视的DevOps工程实践基础</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/07"><span>11 | 分支策略：让研发高效协作的关键要素</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/08"><span>12 | 持续集成：你说的CI和我说的CI是一回事吗？</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/09"><span>13 | 自动化测试：DevOps的阿克琉斯之踵</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/10"><span>14 | 内建质量：丰田和亚马逊给我们的启示</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/11"><span>15 | 技术债务：那些不可忽视的潜在问题</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/12"><span>16 | 环境管理：一切皆代码是一种什么样的体验？</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/13"><span>17 | 部署管理：低风险的部署发布策略</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/14"><span>18 | 混沌工程：软件领域的反脆弱</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/15"><span>19 | 正向度量：如何建立完整的DevOps度量体系？</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/16"><span>20 | 持续改进：PDCA体系和持续改进的意义</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇">04.平台工具篇</a><ul><li><a href="/blog-two/devops实战笔记/04.平台工具篇/01"><span>21 | 开源还是自研：企业DevOps平台建设的三个阶段</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/02"><span>22 | 产品设计之道：DevOps产品设计的五个层次</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/03"><span>23 | 持续交付平台：现代流水线必备的十大特征（上）</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/04"><span>24 | 持续交付平台：现代流水线必备的十大特征（下）</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/05"><span>25 | 让数据说话：如何建设企业级数据度量平台？</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/06"><span>26 | 平台产品研发：三个月完成千人规模的产品要怎么做？</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/07"><span>27 | 巨人的肩膀：那些你不能忽视的开源工具</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/08"><span>28 | 迈向云端：云原生应用时代的平台思考</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog-two/devops实战笔记/05.转型案例篇">05.转型案例篇</a><ul><li><a href="/blog-two/devops实战笔记/05.转型案例篇/01"><span>29 | 向前一步：万人规模企业的DevOps实战转型案例（上）</span></a></li><li><a aria-current="page" class="active" href="/blog-two/devops实战笔记/05.转型案例篇/02"><span>30 | 向前一步：万人规模企业的DevOps实战转型案例（下）</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/06.特别放送">06.特别放送</a><ul><li><a href="/blog-two/devops实战笔记/06.特别放送/01"><span>特别放送（一）| 成为DevOps工程师的必备技能（上）</span></a></li><li><a href="/blog-two/devops实战笔记/06.特别放送/02"><span>特别放送（二）| 成为DevOps工程师的必备技能（下）</span></a></li><li><a href="/blog-two/devops实战笔记/06.特别放送/03"><span>特别放送（三）| 学习DevOps不得不了解的经典资料</span></a></li><li><a href="/blog-two/devops实战笔记/06.特别放送/04"><span>特别放送（四）| Jenkins产品经理是如何设计产品的？</span></a></li><li><a href="/blog-two/devops实战笔记/06.特别放送/05"><span>特别放送（五）| 关于DevOps组织和文化的那些趣事儿</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/07.总结答疑篇">07.总结答疑篇</a><ul><li><a href="/blog-two/devops实战笔记/07.总结答疑篇/01"><span>期中总结 | 3个典型问题答疑及如何高效学习</span></a></li><li><a href="/blog-two/devops实战笔记/07.总结答疑篇/02"><span>期末总结 | 在云时代，如何选择一款合适的流水线工具？</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/08.结束语">08.结束语</a><ul><li><a href="/blog-two/devops实战笔记/08.结束语/01"><span>结束语 | 持续改进，成就非凡！</span></a></li><li><a href="/blog-two/devops实战笔记/08.结束语/02"><span>结课问卷获奖用户名单</span></a></li><li><a href="/blog-two/devops实战笔记/08.结束语/03"><span>期末测试 | 这些DevOps核心知识，你都掌握了吗？</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/summary">devops实战笔记</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="1ES" data-depth="2"><a href="/blog-two/devops实战笔记/05.转型案例篇/02#1es"><span>1ES</span></a></li><li title="持续交付" data-depth="2"><a href="/blog-two/devops实战笔记/05.转型案例篇/02#持续交付"><span>持续交付</span></a></li><li title="持续部署" data-depth="2"><a href="/blog-two/devops实战笔记/05.转型案例篇/02#持续部署"><span>持续部署</span></a></li><li title="总结" data-depth="2"><a href="/blog-two/devops实战笔记/05.转型案例篇/02#总结"><span>总结</span></a></li><li title="思考题" data-depth="2"><a href="/blog-two/devops实战笔记/05.转型案例篇/02#思考题"><span>思考题</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="30--向前一步万人规模企业的devops实战转型案例下"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/05.转型案例篇/02#30--向前一步万人规模企业的devops实战转型案例下"><span class="icon icon-link"></span></a>30 | 向前一步：万人规模企业的DevOps实战转型案例（下）</h1><p>你好，我是石雪峰。今天，我们接着上一讲的内容，继续来聊一聊微软DevOps转型的故事。</p><p>经常有人会问，企业的DevOps转型应该由哪个团队来负责，是否要组建一个全新的DevOps团队呢？带着这个问题，我们来看看微软是怎么做的。</p><h2 id="1es"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/05.转型案例篇/02#1es"><span class="icon icon-link"></span></a>1ES</h2><p>微软有一个特殊的团队，叫作1ES。1ES是One Engineering System的缩写，直译过来就是“一套工程系统”的意思。从这个名字，相信你就可以看出来，<strong>在微软内部，有一套统一的工程能力平台来支撑微软内部各种形态产品的研发交付工作</strong>。没错！这个1ES团队包含了近200名工程师，作为组织级的研发效能团队，他们的目标就是<strong>通过一整套通用的工程能力平台，来提升内部的研发交付效率</strong>。</p><p>1ES团队的工作职责可不仅仅是开发通用工具平台，他们还要负责公司的文化转型、最新的工程方法导入试验、研发过程改进、安全合规性检查、内部研发效率咨询以及在工程团队推广最佳实践等等，可以说是一个“全功能”的企业研发效能和生产力团队。截至2018年，数据显示，总共有近10万名用户在1ES提供的平台上协同办公。</p><p><img src="https://static001.geekbang.org/resource/image/41/b8/41d63ec1588a2655d75d7f55cb8ffab8.png" alt=""/></p><p>但国内的现状是，很多企业对于研发效能的关注才刚刚起步。即便有人员负责类似的事情，也大多分散在各个业务内部，难以形成合力。组建了企业级统一的研发效能团队，而且规模能够跟微软的1ES相提并论的企业，基本上一只手就可以数得过来，就更别提建立一套统一的工程能力平台了。我曾见过一家大型企业，他们内部的工具平台有1700多个，殊不知，这里面有多少的重复建设和资源浪费。</p><p>那么，你以为微软的1ES团队天生就是这样“一统天下”的吗？还真不是这么回事。</p><p>事实上，1ES团队的历史可以追溯到2014年。当时，微软新上任的CEO萨提亚·纳德拉非常重视研发能力建设，他致力于通过最好的工具来赋能研发团队。结果，微软的每个部门都会根据自己的实际情况采购自己习惯的工具平台，这就导致整个公司内部的工具、流程和成熟度差异巨大。差异化的工具和流程进一步增强了不同团队之间的共享和协作，内部人员转岗的成本极高，因为他们到了新团队以后，要从头开始适应一切。</p><p>为了解决这个问题，1ES团队识别了三大领域：<strong>工作计划管理</strong>、<strong>版本控制</strong>和<strong>构建能力</strong>。他们先在企业内部识别哪些团队没有使用公司构建的统一工具，然后自顶向下强推。这背后的核心理念就是“Use what we ship to ship what we use”，也就是使用他们对外发布的工具来研发团队自己的工具。</p><p>不知道你发现没有，这三个领域都是软件交付的主路径，<strong>需求和任务管理、版本控制和构建系统无一不是核心系统</strong>。当你想要建立一个统一的效能平台的时候，最重要的就是抓住主路径上的核心系统。</p><p>关于“如何基于核心系统扩展一整套解决方案”，我给你推荐一篇GitHub的<a target="_blank" rel="noopener noreferrer" href="https://github.blog/2019-11-13-universe-day-one/">博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，你可以看看他们是如何思考这个问题的。</p><p>在接下来的几年里面，1ES团队推动VSTS（也就是现在的Azure DevOps）成为了微软内部的工具平台标准，平台的用户也从最开始的几千个人增长到了后来的10万多人。</p><p>正是从2010年开始至今150个迭代的千锤百炼，才造就了后来Azure DevOps产品的大放异彩。可以说，无论是从设计理念、功能，还是用户体验等方面，微软的Azure DevOps平台在当今业界都是首屈一指的。</p><p><img src="https://static001.geekbang.org/resource/image/dd/ba/dd0189b0de10caf513fdd018e7fadbba.png" alt=""/></p><h2 id="持续交付"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/05.转型案例篇/02#持续交付"><span class="icon icon-link"></span></a>持续交付</h2><p>持续交付是DevOps转型的核心部分，1ES提供的统一工程能力平台让这一切成为了可能。那么，微软的持续交付做到了什么程度呢？</p><p>从2019年3月份的数据来看，他们每天部署82,000次、创建28,000个工作项，每个月有44万个提交请求、460万次构建和240万次的提交数量。</p><p>无论把这些数据的哪一项拿出来，都是非常惊人的，这体现了微软卓越的工程能力水平。</p><p><img src="https://static001.geekbang.org/resource/image/8c/c2/8c67f5153f568acd746021bbe918ebc2.png" alt=""/></p><p>那么，微软是如何一步步走到今天的呢？我们先来看看DevOps中最重要的、也是“老大难”的测试部分，看看微软是如何实现在6分钟内完成6万个测试用例的。</p><p>其实，早在2014年，微软在测试中遇到的问题跟大多数公司没什么两样：测试耗时太长、测试频繁失败、主线质量不可靠、迭代周期末端的质量远远达不到发布门槛。</p><p>这些问题严重到什么程度呢？我给你列举几个数字，你就明白了。</p><ul><li>每天的自动化测试耗时22个小时；</li><li>全功能自动化测试长达2天；</li><li>仅有60%的P0级别用例可以执行成功；</li><li>在过往的8年里面，甚至没有一次每日自动化测试是全部通过的。</li></ul><p>不仅如此，团队成员之间对单元测试存在着巨大的分歧：研发不愿意花时间写单元测试；团队不认为可以通过单元测试替代功能测试；甚至连用不用Mock，他们在理念上也存在着冲突。</p><p>历史总是惊人的相似。在我之前的公司里面，研发总能找到各种理由苦口婆心地说服你他们不需要写单元测试，或者是，各种环境问题导致单元测试压根没法执行完成，因为引用了大量的外部服务。</p><p>微软的解法是，<strong>停止这种无意义的争论，为了达成预期目标前进</strong>。他们<strong>先从能达成共识的部分开始推进，并重新整理了内部的测试模型</strong>，如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/bf/da/bf6f84d0c3ecf36719c7d287f667a3da.png" alt=""/></p><ul><li>L0级：这是没有外部依赖的单元测试。这部分在代码合并请求中执行，执行时长小于60ms；</li><li>L1级：这是存在外部依赖的单元测试，测试时间一般小于2秒，平均400ms左右；</li><li>L2级：是面向接口的功能测试，在预发环境执行；</li><li>L3级：也就是在生产环境下执行的线上测试。</li></ul><p>在明确了整体策略之后，团队开始对测试活动进行改造。整个改造过程可以划分为四个阶段：</p><p><strong>阶段一：从L0/L1级测试入手</strong></p><p>在这个阶段，尽可能地简化L0/L1级测试的执行成本，编写高质量的测试用例。</p><p>根据我在企业里面推行单测的经验，抛开“到底应不应该写单测”这个事情不说，最大的争议点就是<strong>分工</strong>的问题。从做事的角度来说，包含几个方面：工具和框架选型、规则整理输出、工具平台开发、数据的度量和可视化建设。</p><p>为了加快单测的推行，我建议，前期工具和框架选型，由自身的开发和测试工程师或者有经验的DevOps工程师一起完成，并在试点项目跑通。接下来，研发完成规则的梳理，包括单测的书写规则、工具环境配置规则等等，平台方面启动单测相关的能力建设，目的就是研发只需要写单测代码，具体的执行、数据分析、报告统计都交给平台完成。最后，在团队内部进行推广，并持续更新迭代规则和工具。在这个阶段，<strong>尽量不要新增每日测试用例</strong>。</p><p><strong>阶段二：分析已有的每日测试用例</strong></p><p>在这个阶段，重点要识别几个方面的内容：</p><ul><li>哪些测试用例已经过时，可以删掉？</li><li>哪些测试用例可以转移到L0/L1级完成？</li><li>哪些测试可以整合进SDK中专项进行（比如性能测试）？</li></ul><p>这一步骤的目的就是让每日测试用例集合尽可能地“瘦身”，加快执行速度。毕竟，每次跑几十个小时，一旦失败的话，就没有第二次机会了。</p><p><strong>阶段三：将每日测试转化为L2级测试</strong></p><p>接口测试是一种性价比相对更高的测试类型，所以，推进面向接口的自动化测试建设可以兼顾测试的执行效率和业务的覆盖情况。</p><p>在这个阶段，我们需要完善接口自动化测试框架，提供代码、配置和多接口验证等多种测试类型。除此之外，要集中统一的管理系统的API，一方面进行API的治理，另一方面，加强研发和测试基于API的协作，把所有的变更版本线上化。一旦研发更新了API定义，测试可以在同一个地方更新他们的测试用例和Mock数据，从而实现基于API的在线协同工作。</p><p><strong>阶段四：建设L3级测试</strong></p><p>这就是在生产环境的线上测试，主要是通过监控机制来诊断系统的健康度。这部分内容我在<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/167353">第17讲<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>中提到过，如果你不记得了，可以回去复习一下。</p><p>随着L0/L1级测试的不断增多，这些测试都可以纳入到代码合并请求中自动执行。另外，L2级的API接口测试同样可以纳入到流水线中。</p><p>通过40多个迭代的持续努力，以及考核机制的促进作用，整个测试的分布情况发生了明显的反转。</p><p>你可以看到，每日测试的数量不断减少，L0级别的测试不断增多，到后来，L1/L2级的测试也相对稳定下来。你要知道，这40多个迭代可是花了将近3年的时间。如果以后谁再跟你说“3个月就能搞定单测”，你可千万别跟他聊天。</p><p><img src="https://static001.geekbang.org/resource/image/64/eb/6497a8b396e9b125b45934616a7f4beb.png" alt=""/></p><h2 id="持续部署"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/05.转型案例篇/02#持续部署"><span class="icon icon-link"></span></a>持续部署</h2><p>持续交付的终点是持续部署，那么，微软在部署层面又做了哪些事情呢？</p><p>首先，微软不承认半自动化部署这个事情。其实很多时候，部署动作都不是一次性完成的。有些命令或者步骤并没有线上化，或者就是非高频的动作没有做到工具里面，还是需要通过手动复制一段命令的方式来实现。</p><p>经常有人会问：“我们的大部分操作都实现了自动化，这算不算做得不错了呢？”我的回答也很简单：“对于一个没有基础或者非专业的人来说，他是否可以完成这项任务？”坦率地说，这有点“抬杠”的性质，但事实上，如果一个平台做完了，结果还是要依赖于指定人去操作，那你就得想想这个事情的意义和未来的价值了。</p><p>之前我在做一个项目的时候，就遇到过类似的案例。为了解决配置变更的问题，团队成员实现了一个非常复杂的任务，但是在评审的时候，我们发现，这个任务并不能解决所有问题，到头来还是需要他手动入库操作。手动入库的成本其实还好，但是为了自动而自动，结果得不偿失，这就有点浪费时间和精力了。</p><p>那么，<strong>要想解决所有人都能部署的需求，要做的就是完全的自动化</strong>。把所有的操作都内嵌于流水线之中，并且纳入版本控制，用于记录变更信息。使用同一套工具实现多环境部署，通过配置中心完成不同环境的配置下发。</p><p>这样做的好处有很多，一方面，可以在不同的环境中完善部署工具的健壮性，避免由于部署方式或者工具的差异带来的潜在风险。另一方面，与生产环境的部署相比，测试环境的部署心理压力没有那么大。当大家都熟悉测试环境的部署过程之后，对生产环境的部署就是小菜一碟了。</p><p>为了实现安全低风险的部署，微软引入了“部署环”的概念，你可以把部署环理解为<strong>将部署活动拆分成了几个阶段</strong>。每一次生产部署都需要经过五环验证过程，即便是配置变更，也是如此，不存在额外的紧急通道。这五个部署环分别是：</p><ol><li>金丝雀（内部用户）</li><li>小批量外部用户</li><li>大批量外部用户</li><li>国际用户</li><li>其他所有用户</li></ol><p>通过渐进式的部署方式，每一个新的版本都缓慢地经过每一环的验证，并逐步放量，开放给所有用户。其中有几个点值得我们借鉴。</p><p><strong>1.通过流水线打通CI/CD</strong></p><p>我们可以这样理解CI/CD：</p><ul><li>CI的目的是生成一个可以用于部署的包。这个包可以是war包、tar包、ear包，也可以是镜像，这<strong>取决于系统的部署方式</strong>。</li><li>CD的目的是将这个包部署到生产环境，并发布给用户。</li></ul><p>所以，CI和CD的结合点就在于<strong>制品库</strong>，通过流水线调度部署包在制品库中的流转，从而完成制品的晋级。我发现，很多大厂都是用部署前重新打包的方式，人为地将CI和CD的过程割裂开来，这并不是一种好的处理方式。</p><p><strong>2.持续部署并不意味着全自动</strong></p><p>我们都知道，持续部署能力是考查一个公司DevOps能力的最好指标（比如前面我提到的微软每天能够部署8万多次）。那么，这是不是说，每次变更都要经过自动化过程部署到生产环境呢？答案是不一定。</p><p>你可以看一下这幅微软开发的全景图，其中，在CD过程中，每一环的部署都需要人工确认来完成，这背后的核心理念是控制“爆炸半径”。</p><p><img src="https://static001.geekbang.org/resource/image/cb/42/cb221e6fd8e2e06b9cd1850dbf7e0e42.jpeg" alt=""/></p><p>既然无法彻底阻止失败，那么是否能够控制影响范围呢？“部署环”的设计理念正是如此，为了做到这一点，<strong>适当的人工管控还是很有必要的</strong>。</p><p>那么，如何确认部署是成功的呢？</p><p>微软定义了非常详细的保障在线服务可用性的规则，其中最重要的就是，<strong>明确线上服务状态永远处于第一优先级</strong>。你可能觉得，本来不就应该是这样的吗？但是，在实际工作中，我们会发现，内部工具团队经常专注于实现新功能，而把线上的报警放在一边。</p><p>要想解决这个问题，除了明确线上为先的理念之外，制定相应的规则也是很重要的。比如，微软的值班工程师叫作DRI（Designated Responsible Individual），也就是“指定责任人”。微软明确要求，每个在岗工程师必须在工作日5分钟内、休息日15分钟内响应问题，并把这纳入到了人员和团队的考核之中。另外，通过每周、每月的线上服务状态报告，以及每次事故的详尽故障分析，不断在内部强化线上为先的理念。</p><h2 id="总结"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/05.转型案例篇/02#总结"><span class="icon icon-link"></span></a>总结</h2><p>在这个案例中，我给你介绍了微软在转型过程中的几个重点，包括自动化测试能力、统一工程平台和工程团队、分级持续部署、组织变革、团队自治和文化转变等。这些都是在实际的DevOps转型过程中，企业所面对的最为头疼的事情。微软的经历是否给你带来了一些启发呢？当然，想要做好DevOps，可绝对不只是做好这几点就够了的。</p><p>对于DevOps的转型过程，微软的理念是：</p><blockquote><p>A journey of a thousand miles begins with a single sprint.</p></blockquote><p>这就是咱们常说的“千里之行，始于足下”。DevOps不是一种魔法，可以立即见效，而是每次变好一点点，每个人都在不断地思考“我能为DevOps建设做点什么”。这就像微软的自动化测试转型过程一样，你能看到整个趋势在不断变好，慢慢变成了现在这样，每次提交可以在10分钟左右完成近9万个自动化测试。</p><p>微软一直在致力于推广DevOps，并且不断把自己的经验通过各种形式分享出来。仅仅从这一点上，我们就能看出微软的文化转变、向开放开源的转变。我再跟你分享一些微软DevOps转型的资料，你可以参考一下。</p><blockquote><p>资料1. <a target="_blank" rel="noopener noreferrer" href="https://docs.microsoft.com/en-us/azure/devops/learn/devops-at-microsoft/">https://docs.microsoft.com/en-us/azure/devops/learn/devops-at-microsoft/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><blockquote><p>资料2. <a target="_blank" rel="noopener noreferrer" href="https://azure.microsoft.com/en-us/solutions/devops/devops-at-microsoft/">https://azure.microsoft.com/en-us/solutions/devops/devops-at-microsoft/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><p>你还记得我在<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/154695">第6讲<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>中提到的DevOps转型的J型曲线吗？其实无论是DevOps转型，还是研发效率建设，都是一个长期、琐碎的过程。你要做的，就是树立自己的信心，做正确的事情，并期待美好的事情自然发生。</p><h2 id="思考题"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/05.转型案例篇/02#思考题"><span class="icon icon-link"></span></a>思考题</h2><p>通过案例学习DevOps是一种特别好的方法，在案例中，你不仅能借鉴别人的经验，也能学习到系统背后的设计理念。那么，你有什么好的案例学习途径吗？可以分享一下吗？</p><p>欢迎在留言区写下你的思考和答案，我们一起讨论，共同学习进步。如果你觉得这篇文章对你有所帮助，也欢迎你把文章分享给你的朋友。</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/docs/devops实战笔记/05.转型案例篇/02.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">5/2/2022 02:41:02</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog-two/umi.js"></script>
  </body>
</html>
