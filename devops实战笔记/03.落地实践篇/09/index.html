<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog-two/umi.css" />
    <script>
      window.routerBase = "/blog-two";
    </script>
    <script>
      //! umi version: 3.5.17
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.indexOf(e) > -1 ? e : r[0]
        );
      })();
    </script>
    <title>13 | 自动化测试：DevOps的阿克琉斯之踵</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/devops实战笔记/03.落地实践篇/09" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-two/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>后端开发<ul><li><a href="/blog-two/go语言核心36讲">go语言核心36讲</a></li><li><a href="/blog-two/go并发编程实战">go并发编程实战</a></li><li><a href="/blog-two/零基础学python">零基础学python</a></li><li><a href="/blog-two/redis核心技术与实战">redis核心技术与实战</a></li><li><a href="/blog-two/redis源码剖析与实战">redis源码剖析与实战</a></li><li><a href="/blog-two/陈天rust编程第一课">陈天rust编程第一课</a></li><li><a href="/blog-two/tonybaigo语言第一课">tonybaigo语言第一课</a></li><li><a href="/blog-two/深入c语言和程序运行原理">深入c语言和程序运行原理</a></li></ul></span><span>架构师<ul><li><a href="/blog-two/持续交付36讲">持续交付36讲</a></li><li><a href="/blog-two/容器实战高手课">容器实战高手课</a></li><li><a href="/blog-two/ddd实战课">ddd实战课</a></li><li><a href="/blog-two/设计模式之美">设计模式之美</a></li><li><a aria-current="page" class="active" href="/blog-two/devops实战笔记">devops实战笔记</a></li><li><a href="/blog-two/架构实战案例解析">架构实战案例解析</a></li><li><a href="/blog-two/许式伟的架构课">许式伟的架构课</a></li><li><a href="/blog-two/高并发系统设计40问">高并发系统设计40问</a></li><li><a href="/blog-two/深入剖析kubernetes">深入剖析kubernetes</a></li><li><a href="/blog-two/说透中台">说透中台</a></li><li><a href="/blog-two/消息队列进阶">消息队列进阶</a></li><li><a href="/blog-two/mysql实战45讲">mysql实战45讲</a></li><li><a href="/blog-two/openresty从入门到实战">openresty从入门到实战</a></li><li><a href="/blog-two/赵成的运维体系管理课">赵成的运维体系管理课</a></li><li><a href="/blog-two/性能测试实战30讲">性能测试实战30讲</a></li><li><a href="/blog-two/安全攻防技能30讲">安全攻防技能30讲</a></li><li><a href="/blog-two/从0开始学架构">从0开始学架构</a></li><li><a href="/blog-two/vim实用技巧必知必会">vim实用技巧必知必会</a></li><li><a href="/blog-two/如何落地业务建模">如何落地业务建模</a></li><li><a href="/blog-two/技术与商业案例解读">技术与商业案例解读</a></li><li><a href="/blog-two/说透数字化转型">说透数字化转型</a></li><li><a href="/blog-two/遗留系统现代化实战">遗留系统现代化实战</a></li></ul></span><span>管理<ul><li><a href="/blog-two/技术管理实战36讲">技术管理实战36讲</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/项目管理实战课">项目管理实战课</a></li><li><a href="/blog-two/技术面试官识人手册">技术面试官识人手册</a></li><li><a href="/blog-two/技术领导力实战笔记">技术领导力实战笔记</a></li><li><a href="/blog-two/朱赟的技术管理">朱赟的技术管理</a></li></ul></span><span>工作生活<ul><li><a href="/blog-two/10x程序员工作法">10x程序员工作法</a></li><li><a href="/blog-two/python自动化办公实战课">python自动化办公实战课</a></li><li><a href="/blog-two/人人都用得上的写作课">人人都用得上的写作课</a></li><li><a href="/blog-two/体验设计案例课">体验设计案例课</a></li><li><a href="/blog-two/用户体验设计实战课">用户体验设计实战课</a></li><li><a href="/blog-two/程序员的个人财富课">程序员的个人财富课</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/职场求生攻略">职场求生攻略</a></li><li><a href="/blog-two/讲好故事">讲好故事</a></li><li><a href="/blog-two/跟着高手学复盘">跟着高手学复盘</a></li></ul></span><span>杂谈</span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-two/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>后端开发<ul><li><a href="/blog-two/go语言核心36讲">go语言核心36讲</a></li><li><a href="/blog-two/go并发编程实战">go并发编程实战</a></li><li><a href="/blog-two/零基础学python">零基础学python</a></li><li><a href="/blog-two/redis核心技术与实战">redis核心技术与实战</a></li><li><a href="/blog-two/redis源码剖析与实战">redis源码剖析与实战</a></li><li><a href="/blog-two/陈天rust编程第一课">陈天rust编程第一课</a></li><li><a href="/blog-two/tonybaigo语言第一课">tonybaigo语言第一课</a></li><li><a href="/blog-two/深入c语言和程序运行原理">深入c语言和程序运行原理</a></li></ul></li><li>架构师<ul><li><a href="/blog-two/持续交付36讲">持续交付36讲</a></li><li><a href="/blog-two/容器实战高手课">容器实战高手课</a></li><li><a href="/blog-two/ddd实战课">ddd实战课</a></li><li><a href="/blog-two/设计模式之美">设计模式之美</a></li><li><a aria-current="page" class="active" href="/blog-two/devops实战笔记">devops实战笔记</a></li><li><a href="/blog-two/架构实战案例解析">架构实战案例解析</a></li><li><a href="/blog-two/许式伟的架构课">许式伟的架构课</a></li><li><a href="/blog-two/高并发系统设计40问">高并发系统设计40问</a></li><li><a href="/blog-two/深入剖析kubernetes">深入剖析kubernetes</a></li><li><a href="/blog-two/说透中台">说透中台</a></li><li><a href="/blog-two/消息队列进阶">消息队列进阶</a></li><li><a href="/blog-two/mysql实战45讲">mysql实战45讲</a></li><li><a href="/blog-two/openresty从入门到实战">openresty从入门到实战</a></li><li><a href="/blog-two/赵成的运维体系管理课">赵成的运维体系管理课</a></li><li><a href="/blog-two/性能测试实战30讲">性能测试实战30讲</a></li><li><a href="/blog-two/安全攻防技能30讲">安全攻防技能30讲</a></li><li><a href="/blog-two/从0开始学架构">从0开始学架构</a></li><li><a href="/blog-two/vim实用技巧必知必会">vim实用技巧必知必会</a></li><li><a href="/blog-two/如何落地业务建模">如何落地业务建模</a></li><li><a href="/blog-two/技术与商业案例解读">技术与商业案例解读</a></li><li><a href="/blog-two/说透数字化转型">说透数字化转型</a></li><li><a href="/blog-two/遗留系统现代化实战">遗留系统现代化实战</a></li></ul></li><li>管理<ul><li><a href="/blog-two/技术管理实战36讲">技术管理实战36讲</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/项目管理实战课">项目管理实战课</a></li><li><a href="/blog-two/技术面试官识人手册">技术面试官识人手册</a></li><li><a href="/blog-two/技术领导力实战笔记">技术领导力实战笔记</a></li><li><a href="/blog-two/朱赟的技术管理">朱赟的技术管理</a></li></ul></li><li>工作生活<ul><li><a href="/blog-two/10x程序员工作法">10x程序员工作法</a></li><li><a href="/blog-two/python自动化办公实战课">python自动化办公实战课</a></li><li><a href="/blog-two/人人都用得上的写作课">人人都用得上的写作课</a></li><li><a href="/blog-two/体验设计案例课">体验设计案例课</a></li><li><a href="/blog-two/用户体验设计实战课">用户体验设计实战课</a></li><li><a href="/blog-two/程序员的个人财富课">程序员的个人财富课</a></li><li><a href="/blog-two/程序员进阶攻略">程序员进阶攻略</a></li><li><a href="/blog-two/职场求生攻略">职场求生攻略</a></li><li><a href="/blog-two/讲好故事">讲好故事</a></li><li><a href="/blog-two/跟着高手学复盘">跟着高手学复盘</a></li></ul></li><li>杂谈</li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog-two/devops实战笔记">devops实战笔记</a></li><li><a href="/blog-two/devops实战笔记/01.开篇词">01.开篇词</a><ul><li><a href="/blog-two/devops实战笔记/01.开篇词/01"><span>开篇词 | 从默默无闻到风靡全球，DevOps究竟有什么魔力？</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/02.基础理论篇">02.基础理论篇</a><ul><li><a href="/blog-two/devops实战笔记/02.基础理论篇/01"><span>01 | DevOps的“定义”：DevOps究竟要解决什么问题？</span></a></li><li><a href="/blog-two/devops实战笔记/02.基础理论篇/02"><span>02 | DevOps的价值：数字化转型时代，DevOps是必选项？</span></a></li><li><a href="/blog-two/devops实战笔记/02.基础理论篇/03"><span>03 | DevOps的实施：到底是工具先行还是文化先行？</span></a></li><li><a href="/blog-two/devops实战笔记/02.基础理论篇/04"><span>04 | DevOps的衡量：你是否找到了DevOps的实施路线图？</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog-two/devops实战笔记/03.落地实践篇">03.落地实践篇</a><ul><li><a href="/blog-two/devops实战笔记/03.落地实践篇/01"><span>05 | 价值流分析：关于DevOps转型，我们应该从何处入手？</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/02"><span>06 | 转型之路：企业实施DevOps的常见路径和问题</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/03"><span>07 | 业务敏捷：帮助DevOps快速落地的源动力</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/04"><span>08 | 精益看板（上）：精益驱动的敏捷开发方法</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/05"><span>09 | 精益看板（下）：精益驱动的敏捷开发方法</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/06"><span>10 | 配置管理：最容易被忽视的DevOps工程实践基础</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/07"><span>11 | 分支策略：让研发高效协作的关键要素</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/08"><span>12 | 持续集成：你说的CI和我说的CI是一回事吗？</span></a></li><li><a aria-current="page" class="active" href="/blog-two/devops实战笔记/03.落地实践篇/09"><span>13 | 自动化测试：DevOps的阿克琉斯之踵</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/10"><span>14 | 内建质量：丰田和亚马逊给我们的启示</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/11"><span>15 | 技术债务：那些不可忽视的潜在问题</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/12"><span>16 | 环境管理：一切皆代码是一种什么样的体验？</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/13"><span>17 | 部署管理：低风险的部署发布策略</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/14"><span>18 | 混沌工程：软件领域的反脆弱</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/15"><span>19 | 正向度量：如何建立完整的DevOps度量体系？</span></a></li><li><a href="/blog-two/devops实战笔记/03.落地实践篇/16"><span>20 | 持续改进：PDCA体系和持续改进的意义</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇">04.平台工具篇</a><ul><li><a href="/blog-two/devops实战笔记/04.平台工具篇/01"><span>21 | 开源还是自研：企业DevOps平台建设的三个阶段</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/02"><span>22 | 产品设计之道：DevOps产品设计的五个层次</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/03"><span>23 | 持续交付平台：现代流水线必备的十大特征（上）</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/04"><span>24 | 持续交付平台：现代流水线必备的十大特征（下）</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/05"><span>25 | 让数据说话：如何建设企业级数据度量平台？</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/06"><span>26 | 平台产品研发：三个月完成千人规模的产品要怎么做？</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/07"><span>27 | 巨人的肩膀：那些你不能忽视的开源工具</span></a></li><li><a href="/blog-two/devops实战笔记/04.平台工具篇/08"><span>28 | 迈向云端：云原生应用时代的平台思考</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/05.转型案例篇">05.转型案例篇</a><ul><li><a href="/blog-two/devops实战笔记/05.转型案例篇/01"><span>29 | 向前一步：万人规模企业的DevOps实战转型案例（上）</span></a></li><li><a href="/blog-two/devops实战笔记/05.转型案例篇/02"><span>30 | 向前一步：万人规模企业的DevOps实战转型案例（下）</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/06.特别放送">06.特别放送</a><ul><li><a href="/blog-two/devops实战笔记/06.特别放送/01"><span>特别放送（一）| 成为DevOps工程师的必备技能（上）</span></a></li><li><a href="/blog-two/devops实战笔记/06.特别放送/02"><span>特别放送（二）| 成为DevOps工程师的必备技能（下）</span></a></li><li><a href="/blog-two/devops实战笔记/06.特别放送/03"><span>特别放送（三）| 学习DevOps不得不了解的经典资料</span></a></li><li><a href="/blog-two/devops实战笔记/06.特别放送/04"><span>特别放送（四）| Jenkins产品经理是如何设计产品的？</span></a></li><li><a href="/blog-two/devops实战笔记/06.特别放送/05"><span>特别放送（五）| 关于DevOps组织和文化的那些趣事儿</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/07.总结答疑篇">07.总结答疑篇</a><ul><li><a href="/blog-two/devops实战笔记/07.总结答疑篇/01"><span>期中总结 | 3个典型问题答疑及如何高效学习</span></a></li><li><a href="/blog-two/devops实战笔记/07.总结答疑篇/02"><span>期末总结 | 在云时代，如何选择一款合适的流水线工具？</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/08.结束语">08.结束语</a><ul><li><a href="/blog-two/devops实战笔记/08.结束语/01"><span>结束语 | 持续改进，成就非凡！</span></a></li><li><a href="/blog-two/devops实战笔记/08.结束语/02"><span>结课问卷获奖用户名单</span></a></li><li><a href="/blog-two/devops实战笔记/08.结束语/03"><span>期末测试 | 这些DevOps核心知识，你都掌握了吗？</span></a></li></ul></li><li><a href="/blog-two/devops实战笔记/summary">devops实战笔记</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="自动化测试要解决什么问题？" data-depth="2"><a href="/blog-two/devops实战笔记/03.落地实践篇/09#自动化测试要解决什么问题"><span>自动化测试要解决什么问题？</span></a></li><li title="自动化测试的设计" data-depth="2"><a href="/blog-two/devops实战笔记/03.落地实践篇/09#自动化测试的设计"><span>自动化测试的设计</span></a></li><li title="自动化测试的开发" data-depth="2"><a href="/blog-two/devops实战笔记/03.落地实践篇/09#自动化测试的开发"><span>自动化测试的开发</span></a></li><li title="自动化测试结果分析" data-depth="2"><a href="/blog-two/devops实战笔记/03.落地实践篇/09#自动化测试结果分析"><span>自动化测试结果分析</span></a></li><li title="总结" data-depth="2"><a href="/blog-two/devops实战笔记/03.落地实践篇/09#总结"><span>总结</span></a></li><li title="思考题" data-depth="2"><a href="/blog-two/devops实战笔记/03.落地实践篇/09#思考题"><span>思考题</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="13--自动化测试devops的阿克琉斯之踵"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/03.落地实践篇/09#13--自动化测试devops的阿克琉斯之踵"><span class="icon icon-link"></span></a>13 | 自动化测试：DevOps的阿克琉斯之踵</h1><p>你好，我是石雪峰。</p><p>在古希腊神话中，战神阿克琉斯英勇无比，浑身刀枪不入，唯独脚后跟是他的致命弱点。在特洛伊战争中，他的脚后跟被一箭射中，倒地身亡，从此，阿克琉斯之踵就被用来形容致命的缺陷。我今天要跟你聊的自动化测试，就是DevOps的阿克琉斯之踵。</p><p>我之前走访过很多公司，我发现，在工程实践领域，比如配置管理、持续集成等，他们实践得还不错，但是却有两大通病，一个是研发度量，另一个就是自动化测试。</p><p>没有人会否认自动化测试的价值，而且很多公司也都或多或少地在实践自动化测试。但从整体来看，自动化测试的实施普遍不成体系，大多都在关注单点工具。另外，团队对自动化测试的真实效果也存在疑惑。如果不能解决这些问题，就很难突破实践DevOps的天花板。</p><p>那么，自动化测试究竟要解决什么问题，又适合哪些业务形态和测试场景呢？我们该如何循序渐进地推进建设，并且正确地度量效果以免踩坑呢？这些问题，就是我要在这一讲中跟你分享的重点内容。</p><h2 id="自动化测试要解决什么问题"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/03.落地实践篇/09#自动化测试要解决什么问题"><span class="icon icon-link"></span></a>自动化测试要解决什么问题？</h2><p>产品交付速度的提升，给测试工作带来了很大的挑战。一方面，测试时间被不断压缩，以前三天的测试工作要在一天内完成。另一方面，需求的变化也给测试工作的开展带来了很大的不确定性。这背后核心的问题是，<strong>业务功能的累加导致测试范围不断扩大，但这跟测试时长的压缩是矛盾的</strong>。说白了，就是要测试的内容越来越多，但是测试的时间却越来越短。</p><p>全面测试会带来相对更好的质量水平，但是投入的时间和人力成本也是巨大的，而快速迭代交付就意味着要承担一定的风险。那么，究竟是要速度，还是要质量，这是一个很难回答的问题。</p><p>所以，要想提升测试效率，自然就会联想到自动化手段。实际上，自动化测试适用于以下几种典型场景：</p><ol><li>有大量机械的重复操作，并且会反复执行的场景，比如批量的回归测试；</li><li>有明确的设计规范且相对稳定的场景，比如接口测试；</li><li>大批量、跨平台的兼容性测试，比如覆盖多种版本和多种机型的测试，几十个机型还可以接受，如果覆盖成百上千个机型，就只能依靠自动化了；</li><li>长时间不间断执行的测试，比如压力测试、可用性测试等。</li></ol><p>这些典型场景往往都具备几个特征：设计明确、功能稳定、可多次重复、长期大批量执行等，核心就是通过自动化手段来解决测试成本的问题，也就是人的问题。但这并不意味着手工测试就没有价值了。相反，当人从重复性劳动中解放出来后，就可以投入到更有价值的测试活动中，比如探索性测试、易用性测试、用户验收测试等，这些都属于手工测试的范畴。</p><p>这听上去还挺合理的，可是，为什么很多公司还是倾向于采用手工测试的方式呢？实际上，并非所有的测试活动都适合自动化，而且，自动化测试建设也面临着一些问题。</p><ol><li><strong>投入产出比</strong>：很多需求基本上只会上线一次（比如促销活动类需求），那么，实现自动化测试的成本要比手动测试高得多，而且以后也不会再用了，这显然有点得不偿失。</li><li><strong>上手门槛</strong>：自动化测试依赖代码方式实现，要开发一套配置化的测试框架和平台，对架构设计和编码能力都有很大的要求。但是，测试人员的编码能力一般相对较弱。</li><li><strong>维护成本高</strong>：无论是测试环境、测试用例还是测试数据，都需要随着需求的变化不断进行调整，否则就很容易因为自动化测试过时，导致执行失败。</li><li><strong>测试设备投入高</strong>：比如，移动App的测试需要有大量的手机资源，想要覆盖所有的手机型号、操作系统版本，本身就不太现实。更何况，有限的机器还经常被测试人员拿去做本地调试，这就进一步加剧了线上测试没有可用资源的情况。</li></ol><h2 id="自动化测试的设计"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/03.落地实践篇/09#自动化测试的设计"><span class="icon icon-link"></span></a>自动化测试的设计</h2><p>这么看来，自动化测试并不是一把万能钥匙，我们也不能指望一切测试都实现自动化。只有在合适的领域，自动化测试才能发挥出最大价值。那么，你可能就要问了，面对这么多种测试类型，到底要从哪里启动自动化测试的建设呢？</p><p>首先，我来给你介绍一下经典的测试三角形。这个模型描述了从单元测试、集成测试到UI测试的渐进式测试过程。越是靠近底层，用例的执行速度就越快，维护成本也越低。而在最上层的UI层，执行速度要比单元测试和接口测试要慢，比手工测试要快，相应的维护成本要远高于单元测试和接口测试。</p><p><img src="https://static001.geekbang.org/resource/image/28/6f/28d6b53907036a38d5649a673664006f.png" alt=""/></p><blockquote><p>图片来源：“DevOps Handbook&quot;</p></blockquote><p>这样看来，从靠近底层的单元测试入手是一个投入产出相对比较高的选择。但实际上，单元测试的执行情况因公司而异，有的公司能做到80%的覆盖率，但有的公司却寸步难行。毕竟，单元测试更多是由开发主导的，开发领导的态度就决定了运行的效果。但不可否认的是，单元测试还是非常必要的，尤其是针对核心服务，比如核心交易模块的覆盖率。当然，好的单元测试需要研发投入大量的精力。</p><p>对于UI层来说，执行速度和维护成本走向了另外一个极端，这也并不意味着就没有必要投入UI自动化建设。<strong>UI层是唯一能够模拟用户真实操作场景的端到端测试</strong>，页面上的一个按钮可能触发内部几十个函数调用，和单元测试每次只检查一个函数的逻辑不同，UI测试更加关注模块集成后的联动逻辑，<strong>是集成测试最有效的手段</strong>。</p><p>另外，很多测试人员都是从UI开始接触自动化的，再加上相对成熟的测试工具和框架，实施不依赖于源码，也是一种比较容易上手的自动化手段。在实际应用中，UI自动化可以帮助我们节省人工测试成本，提高功能测试的测试效率。不过，它的缺点也是比较明显的：<strong>随着敏捷迭代的速度越来越快，UI控件的频繁变更会导致控件定位不稳定，提高了用例脚本的维护成本</strong>。</p><p>综合考虑投入产出比和上手难度的话，位于中间层的接口测试就成了一种很好的选择。一方面，现代软件架构无论是分层还是服务调用模式，对接口的依赖程度都大大增加。比如典型的前后端分离的开发模式，前后端基本都是在围绕着接口进行开发联调。另一方面，与单元测试相比，接口测试调用的业务逻辑更加完整，并且具备清晰的接口定义，适合采用自动化的方式执行。</p><p>正因为如此，对于基于Web的应用来说，我更推荐椭圆形模型，也就是以中间层的API接口测试为主，以单元测试和UI测试为辅。你可以参考一下分层自动化测试模型图。</p><p><img src="https://static001.geekbang.org/resource/image/14/9b/140a33713f7332277c8d2114d050d39b.png" alt=""/></p><h2 id="自动化测试的开发"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/03.落地实践篇/09#自动化测试的开发"><span class="icon icon-link"></span></a>自动化测试的开发</h2><p><strong>有效的自动化测试离不开工具和平台的支持</strong>。以接口测试为例，最早都是通过cURL、Postman、JMeter等工具单机执行的。但是，一次成功的接口测试，除了能够发起服务请求之外，还需要前置的测试数据准备和后置的测试结果校验。对于企业的实际业务来说，不仅需要单接口的执行，还需要相对复杂的多接口，而且带有逻辑的执行，这就依赖于调用接口的编排能力，甚至是内建的Mock服务。</p><p>不仅如此，测试数据、用例、脚本的管理，测试过程中数据的收集、度量、分析和展示，以及测试报告的发送等，都是一个成熟的自动化测试框架应该具备的功能。</p><p>比如，对于UI自动化测试来说，最让人头疼的就是UI控件变化后的用例维护成本问题。<strong>解决方法就是操作层获取控件和控件本身的定位方法，进行解耦，这依赖于框架的设计与实现</strong>。在实际操作控件时，你可以通过自定义名称的方式来调用控件，自定义名称在控件相关配置文件中进行定义。在具体操作时，可以通过操作层之下的代理层来处理。示例代码如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">public void searchItem(String id) {</span></div><div class="token-line"><span class="token plain">      getTextBox(&quot;SearchBar&quot;).clearText();</span></div><div class="token-line"><span class="token plain">      getTextBox(&quot;SearchBar&quot;).setText(id);</span></div><div class="token-line"><span class="token plain">      getButton(&quot;Search&quot;).click();</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>在代码中，搜索条控件被定义为SearchBar，通过调用代理层的getTextBox方法，得到一个文本输入框类型对象，并调用该对象的清除方法。然后，在对应的控件配置文件中添加对应的自定义名称和控件的定位方法。</p><p>这样一来，即便控件发生改变，对于实际操作层的代码来说，由于采用的是自定义名称，所以你不需要修改逻辑，只要在对应的控件配置文件中，替换控件的定位方法就行了。关于具体的控件配置文件，示例代码如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;TextBox comment=&quot;首页搜索框&quot; id=&quot;SearchBar&quot;&gt;</span></div><div class="token-line"><span class="token plain">    	&lt;iOS&gt;</span></div><div class="token-line"><span class="token plain">        &lt;appium&gt;</span></div><div class="token-line"><span class="token plain">          &lt;dependMethod methodName=&quot;findElementByXPath&quot;&gt;</span></div><div class="token-line"><span class="token plain">          	&lt;xpath&gt;</span></div><div class="token-line"><span class="token plain">              //XCUIElementTypeNavigatorBar[@name=&quot;MainPageView&quot;]/XCUIElementTypeOther/...</span></div><div class="token-line"><span class="token plain">            &lt;/xpath&gt;</span></div><div class="token-line"><span class="token plain">          &lt;/dependMethod&gt;</span></div><div class="token-line"><span class="token plain">        &lt;/appium&gt;</span></div><div class="token-line"><span class="token plain">      &lt;/iOS&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/TextBox&gt;</span></div></pre></div><p>当然，为了简化测试人员的编写用例成本，你可以在操作层使用Page-Object模式，针对页面或模块封装操作方式，通过一种符合认知的方式，来实现具体的功能操作。这样一来，在实际编写用例的时候，你就可以非常简单地调用操作层的接口定义。示例代码如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">@TestDriver(driverClass = AppiumDriver.class)</span></div><div class="token-line"><span class="token plain">    public void TC001() {</span></div><div class="token-line"><span class="token plain">    	String id=&#x27;10000&#x27;</span></div><div class="token-line"><span class="token plain">      page.main.switchView(3);</span></div><div class="token-line"><span class="token plain">      page.cart.clearShoppingCart();</span></div><div class="token-line"><span class="token plain">      page.main.switchView(0);</span></div><div class="token-line"><span class="token plain">      page.search.searchProduct(id);</span></div><div class="token-line"><span class="token plain">      page.infolist.selectlist(0);</span></div><div class="token-line"><span class="token plain">      page.infodetail.clickAddCart();</span></div><div class="token-line"><span class="token plain">      Assert.assertTrue(page.cart.isProductCartExist(), &quot;商品添加成功&quot;)</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>从这些示例中，我们可以看出，一个良好的自动化测试框架，可以显著降低测试人员编写测试用例的门槛，以及测试用例的维护成本。对于一个成熟的平台来说，平台易用性是非常重要的能力，通过DSL方式来声明测试过程，可以让测试人员聚焦在测试业务逻辑的设计和构建上，大大提升自动化测试的实现效率。</p><p>关于自动化测试框架的能力模型，我给你分享你一份资料，你可以点击<a target="_blank" rel="noopener noreferrer" href="https://pan.baidu.com/s/1E3xAHgcehW9NyWKVgTXxFQ">网盘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>获取，提取码是gk9w。这个能力模型从测试脚本封装、测试数据解耦、测试流程编排、报告生成等多个方面，展示了框架建设的各个阶段应该具备的能力。</p><h2 id="自动化测试结果分析"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/03.落地实践篇/09#自动化测试结果分析"><span class="icon icon-link"></span></a>自动化测试结果分析</h2><p>那么，我们该如何衡量自动化测试的结果呢？当前比较常用的方式是<strong>覆盖率</strong>，不过问题是，测试覆盖率提升就能发现更多的缺陷吗？</p><p>一家大型金融公司的单元测试覆盖率达到了80%，接口覆盖率更是达到了100%，从这个角度来看，他们的自动化测试做得相当不错。但是，当我问到自动化测试发现的问题数量占到整体问题的比例时，他们的回答有点出人意料。在这么高的覆盖率基础上，自动化测试发现的问题占比仅仅在5%左右。那么，花了这么大力气建设的自动化测试，最后仅仅发现了5%的有效问题，这是不是说明自动化测试的投入产出比不高呢？</p><p>实际上，说自动化测试是为了发现更多的缺陷，这是一个典型的认知误区。在实际项目中，手工测试发现的缺陷数量要比自动化测试发现的缺陷数量多得多。自动化测试更多是在帮助守住软件质量的底线，尤其是应用在回归测试中，自动化测试可以确保工作正常的已有功能不会因为新功能的引入而带来质量回退。可以这么说，<strong>如果自动化测试覆盖率足够高，那么软件质量一定不会差到哪儿去</strong>。</p><p>在自动化测试领域，除了追求覆盖率一个指标以外，自动化测试的结果分析也值得重点关注一下。如果自动化测试的结果并不准确，甚至带来大量误报的话，这对团队来说反而是一种干扰。关于测试误报，是指由于非开发代码变更导致的自动化测试用例执行失败的情况。业界对于误报率的普遍定义是：</p><blockquote><p>自动化测试误报率=非开发变更引入的问题用例数量/测试失败的用例数量</p></blockquote><blockquote><p>比如，单次自动化测试执行了100个用例，其中有20个用例失败，这20个失败用例有5个是由于本次功能或代码变更引入的，也就是真实的缺陷，那么误报率就等于：（20 - 5）/20 = 75%</p></blockquote><p><strong>测试误报率是体现自动化测试稳定性的一个核心指标</strong>。对于不同测试类型和产品形态，误报的的原因有很多。比如测试环境的网络不稳定导致的连接超时、测试脚本和测试工具本身的固有缺陷导致的执行失败、测试数据不齐备、测试资源不可用等等。</p><p>由于测试误报的客观存在，即便执行了自动化测试并给出了测试结果，但还是需要人工审查判断之后，才能将真正的问题上报缺陷系统。这样一来，在自动化执行末端加入了人工处理，就导致自动化测试难以大规模推行，这也是自动化测试略显“鸡肋”的原因之一。</p><p>那么，要如何解决这个问题呢？这就要依赖于自动化测试结果的分析啦。</p><ol><li>对自动化测试的问题进行分类。你要弄清楚一次失败是环境问题、网络问题、功能变更，还是系统缺陷？你需要将失败的用例归纳到这些分类之中。当一个类别的问题非常多的时候，你可以考虑进行拆分，比如网络问题，你可以拆分为网络不可达、延迟超时、域名解析错误等等。</li><li>增加已有分类的自动识别能力。比如，对于捕获到的常见异常，可以根据异常信息自动上报到对应的错误分类，从而简化人工识别和归类错误的工作量。</li><li>提升自动化测试工具和环境的健壮性，对已知问题增加一定的重试机制。</li><li>持续积累和丰富错误分类，有针对性地开展改进工作，从而不断提升自动化测试的稳定性。</li></ol><p>我跟你分享一幅某公司的自动化测试结果分析示意图。通过统计错误的分类，可以看出错误的占比情况，并且针对常见的误报类型进行有针对性的优化，并建立度量指标来跟踪长期结果，从而保证自动化测试结果的整体可信度。这些工作都需要长期的投入才能看出成效，这也是让自动化测试价值最大化和团队能力提升的必经之路。</p><p><img src="https://static001.geekbang.org/resource/image/70/07/70445e2161b3c447c7d21384da947e07.png" alt=""/></p><h2 id="总结"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/03.落地实践篇/09#总结"><span class="icon icon-link"></span></a>总结</h2><p>总结一下，这一讲我给你介绍了有关自动化测试的四个方面，包括自动化测试要解决的问题和适用场景、实施的路径、框架工具开发的典型思路以及结果分析的要点。希望能够帮你建立起对自动化测试这个“老大难”问题的全面认知，让你在推进自动化测试能力建设的时候有迹可循。</p><h2 id="思考题"><a aria-hidden="true" tabindex="-1" href="/blog-two/devops实战笔记/03.落地实践篇/09#思考题"><span class="icon icon-link"></span></a>思考题</h2><p>你所在的企业在进行自动化建设时，有哪些困境和问题，你们是如何解决的呢？</p><p>欢迎在留言区写下你的思考和答案，我们一起讨论，共同学习进步。如果你觉得这篇文章对你有所帮助，欢迎你把文章分享给你的朋友。</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/docs/devops实战笔记/03.落地实践篇/09.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">5/2/2022 02:41:01</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog-two/umi.js"></script>
  </body>
</html>
